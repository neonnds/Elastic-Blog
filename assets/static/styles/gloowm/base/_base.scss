//
// pxToRem
// ------
// Converts a Px value into a rEm value

@function pxToRem($px, $base: $font-base-size) {
	@return ($px / $base) + rem;
}

//
// Base styles
// =============================================================================

html {
	min-height: 100vh;
	background-color: getColor(background, body);

}

body {
	line-height: 1.6;
	border: pxToEm($gutter / 5) solid getColor(background, body);
	background-color: getColor(background, light);
	transition: border $transition-duration;

	@media (min-width: $bp-small) {
		border-width: 1em
	}
}

#default-portfolio-item {
	display: none;
}

.empty-portfolio-item {
	display: none;
}

.panel {
	overflow-y: scroll;
	background: none repeat scroll 0 0 #fff;
	border: 1px solid #aaaaaa;
	box-sizing: border-box;
	outline: medium none;
	padding: 4px;
	min-height: 400px;
	display: inline-block;
	width: 100%;

	@media (max-width: $bp-small) {
		width: 99%;
	}
} 

.content-panel {
	padding-right: 2px;
	padding-left: 30px;

	@media (max-width: $bp-medium) {
		padding-right: 23px;
	}

	.portfolio-item {
		border: 1px solid #aaaaaa;
		margin-bottom: 0;
	}
} 

.preview-panel {
	padding-right: 30px;
	padding-left: 2px;

	@media (max-width: $bp-medium) {
		padding-left: 30px;
		padding-right: 23px;
	}

	.portfolio-item {
		border: 1px solid #aaaaaa;
		margin-bottom: 0;
	}
}

.modal {
	opacity: 1;
	display: none;
	pointer-events: all;

	.modal-body {
		text-align: center;
	}
}

	.modal p, .modal ul {
		display: none;
	}

	.modal ul li {
		display: none;
		list-style: none;
	}

//
// Add top margin to section
// =================

.low-section {
	margin-top: unitSize(10);
}


//
// Home section
// ============

.home-section {
	text-align: center;

	h1 {
		letter-spacing: 0.05em;
		margin-bottom: unitSize(4);
		margin-top: unitSize(6);
		text-transform: uppercase;

		@media (max-width: $bp-small) {
			margin-bottom: unitSize(2);
		}

		&::after { 
			content: none;
		}

		span:first-of-type {
			color: getColor(base, primary);
      			margin-right: 0.5em;
     		}
	}
}


//
// Navigation button
// =============================================================================
// <a href="#" id="search-button" class="fa fa-search"><span>Search</span></a>

#search-button {
	position: fixed;
	right: unitSize(3.5);
	top: unitSize(7);
	color: getColor(text, primary);

	span {
		display: none;
	}

	&:focus {
		outline: 0; 
	}

	&:focus, &:hover {
		color: getColor(base, primary);
	}
}

.nav-button {
	height: unitSize(5);
	position: fixed;
	top: unitSize(1);
	right: unitSize(1);
	overflow: hidden;
	text-indent: 100%;
	transition: transform 0.5s, background-color $transition-duration;
	white-space: nowrap;
	width: unitSize(5);
	z-index: 3;

	@media (min-width: $bp-small) {
		top: unitSize(2);
		right: unitSize(2);
	}

	&:focus { 
		outline: 0; 
	}

	&:focus, &:hover {
		.nav-icon {
			background-color: getColor(base, primary);
		}
	}

	// Burger menu icon
	.nav-icon {
		background-color: getColor(text, primary);
		bottom: auto;
		height: 3px;
		left: 50%;
		position: absolute;
		right: auto;
		top: 50%;
		transform: translateX(-50%) translateY(-50%);
		transition: 0.5s;
		width: 22px;

		&::before, &::after {
			backface-visibility: hidden;
			background-color: inherit;
			content: '';
			height: 100%;
			right: 0;
			position: absolute;
			top: 0;
			transform: translateZ(0);
			transition: transform 0.5s, width 0.5s, top 0.3s;
			width: 100%;
		}

		&::before { 
			transform: translateY(-6px); 
		}
		
		&::after { 
			transform: translateY(6px); 
		}
	}
}

//
// Sidebar navigation
// =============================================================================

.nav {
	font-family: $font-family-headings;
	font-size: pxToEm(16);
	height: 100%;
	position: fixed;
	right: 0;
	top: 0;
	bottom: 0;
	transition: visibility 0s 0.7s;
	visibility: hidden;
	width: 20em;
	z-index: 2;

	.logo {
		height: unitSize(9);
		display: inline-block;
		margin-bottom: unitSize(6);
		width: 100%;
   		text-align: center;
	}

	a {
		color: getColor(text, secondary);
      		letter-spacing: .75px;
		text-transform: uppercase;

		&.active, &:hover, &:focus { 
			color: white; 
       		}

		&.active {
			font-weight: bold; 
		}
	}

	li { 
		list-style: none; 
	}

	ul {
		padding-left: 0;
		margin-bottom: $spacing-s;

		&:last-of-type { margin-bottom: unitSize(6); }
	}

	h2 {
		color: white;
		margin-bottom: unitSize(2);
		margin-top: 0;
		font-size: pxToEm($h3-size);
	}

	.nav-wrapper {
		background-color: getColor(background, dark);
		height: 100%;
		overflow-y: auto;
		padding: unitSize(6) pxToEm($gutter);
		transform: translate(100%, 0);
		transition: transform 0.7s;
	}
}

// When the navigation is open
.nav--open {

	// Make the navigation visible
	.nav {
		transition: visibility 0s 0s;
		visibility: visible;

		// Move the navigation
		.nav-wrapper {
			transform: translateX(0);
			transition: transform 0.5s;
		}
	}

	.nav-button {
		&:focus, &:hover {
			.nav-icon {
				background-color: transparent;
			}
		}
	}

	// Animate icon
	.nav-icon {
		background-color: transparent;

		&::after, &::before {
			transition: transform 0.5s;
			background-color: getColor(base, primary);
		}

		&::before { 
			transform: rotate(45deg); 
		}
		
		&::after { 
			transform: rotate(-45deg); 
		}
	}
}


//
// Main footer
// =============================================================================

.main-footer {
	@include clearfix();

	font-family: $font-family-headings;
	font-size: pxToEm(14);
	margin-top: unitSize(2);
	padding: unitSize(3) 0;

	@media (max-width: $bp-small) { 
		text-align: center; 
	}

	a {
		color: getColor(text, primary);
		font-weight: bold;

		&:hover, &:focus { 
			color: getColor(base, primary); 
		}
	}

	p {
		color: getColor(text, secondary);
		margin-bottom: 0;

		@media (min-width: $bp-medium) {
			float: left;
		}

		a {
			color: getColor(text, secondary);
		}
	}

	ul {
		margin-bottom: 0;
		margin-top: unitSize(1);
		padding: 0;

		@media (min-width: $bp-medium) {
			float: right;
			margin-top: 0;
		}
	}

	li {
		display: block;
		padding: 0;
		line-height: 2;
		text-transform: uppercase;
		letter-spacing: 1px;

		@media (min-width: $bp-medium) {
			display: inline-block;
			line-height: inherit;

			&:not(:last-of-type) { 
				margin-right: 2em; 
			}
		}
	}
}



//
// Main header
// ===========

.mainHeader {
	font-family: $font-family-headings;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	max-width: none;
	padding-top: unitSize(5);

	@media (max-width: $bp-small) {
		padding-top: unitSize(3);
	}

	.logo {
		position: relative;
		left: 20%;

		@media (max-width: $bp-medium) {
			left: 15%;
		}

		@media (max-width: $bp-small) {
			left: 10%;
		}

		img {
			width: unitSize(8);
			height: unitSize(8);

			@media (max-width: $bp-medium) {
				width: unitSize(4);
				height: unitSize(4);
			}

			@media (max-width: $bp-small) {
				width: unitSize(3);
				height: unitSize(3);
			}
		}
	}
}


//
// Inputs
// ===========

input,select,textarea {
	font-family: $font-family-headings;
	background-color: $white;
}

textarea {
	font-size: pxToEm(16);
}

input, select {

	&:not([type="submit"]) {
		margin-bottom: 10px; 
	}
}

.view-post {
	margin-top: unitSize(11);

	.portfolio-item {
		border-bottom: none;
	}
}
